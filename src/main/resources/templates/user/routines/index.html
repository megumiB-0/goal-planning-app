<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<div th:replace="~{fragment :: meta}"></div>
	<div th:replace="~{fragment :: styles}"></div>
	<!-- FullCalendar（CSS & JS） -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<title>ルーティン一覧</title>
</head>
<body class="d-flex flex-column vh-100">
	<div class="goalplanningapp-wrapper">
		<div th:replace="~{fragment :: header}"></div>
		<main class="flex-grow-1">
			<div class="container pt-4 pb-5 goalplanningapp-container">
				<div class="row justify-content-center">
					<div class="col-xl-10 col-lg-11 col-md-12">
						<h1 class="mb-4 text-center">ルーティン一覧</h1>
						<div th:if="${successMessage}" class="justify-content-center alert alert-info mb-3">
							<p th:text="${successMessage}"></p>
					</div>
					<div class="d-flex justify-content-center mt-4 gap-3">
						<a th:if="${isUpdate}" th:href="@{/routines/update}" class="btn btn-primary btn-md px-4">
							修正する
						</a>
						<a th:unless="${isUpdate}" th:href="@{/routines/update}" class="btn btn-primary btn-md px-5">
							新規登録する
						</a>
						<a th:href="@{/home}"class="btn btn-outline-primary">
							HOMEに戻る
						</a>
						</div>
						<div id="calendar"></div>
						<!-- カレンダー用js -->
						<script src="/js/calendar.js"></script>
						<script>
							(async () => {
								const calendarEl = document.getElementById('calendar');
								const calendar = await initLearningCalendar({
								calendarEl,
								showRoutines: true,
								showPlans: false,
								showRecords: false
							});
								calendar.render();
							})();							

						</script>
					</div>
				</div>
			</div>
		</main>
		<div th:replace="~{fragment :: footer}"></div>
	</div>
	<div th:replace="~{fragment :: scripts}"></div>
</body>
</html>
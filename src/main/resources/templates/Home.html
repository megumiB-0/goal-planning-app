<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<div th:replace="~{fragment :: meta}"></div>
	<div th:replace="~{fragment :: styles}"></div>
	<!-- Chart.js をCDNで読み込み -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<title>Goal Planning App</title>
</head>
<body>
	<div class="goalplanningapp-wrapper">
		<div th:replace ="~{fragment :: header}"></div>
		<main>
			<div class="container pt-4 pb-5 goalplanningapp-container">
				<div class="row mb-4">
					<div class="col-12">
					<!-- ログインメッセージ表示 -->
					<div th:if="${loginMessage}" class="justify-content-center alert alert-info mb-3">
						<p th:text="${loginMessage}"></p>
					</div>
					<!-- 登録成功メッセージ表示 -->
					<div th:if="${successMessage}" class="justify-content-center alert alert-info mb-3">
						<p th:text="${successMessage}"></p>
					</div>
					<!-- エラーメッセージ表示-->
					<div th:if="${errorMessage}" class="justify-content-center alert-danger mb-3">
						<p th:text="${errorMessage}"></p>
					</div>
					</div>

		<!-- 目標設定済み -->
				<div th:if="${hasGoal}">
				<div class="row d-flex mb-3">
						<h1 th:text="${message}" class="alert alert-light"></h1>
					</div>					
				</div>
				</div>
				<!-- 下段（左右分割） -->
				<div class="row">
					<!-- 左側：5/12 -->
					<div class="col-md-5 mb-4">
						<div class="card p-3">
							<h5 class="card-title">進捗グラフ</h5>
								<canvas id="myChart"></canvas>
								
					<script th:inline="javascript">
					/* <![CDATA[*/
					let studyData = /*[[${studyData}]]*/ [];
					let startDate = /*[[${startDate}]]*/ [];
					let goalDate = /*[[${goalDate}]]*/ [];
					let estimatedHours = /*[[${estimatedHours}]]*/ [];
					/*]]:*/
					</script>
					<script src="/js/study-chart.js"></script>
						</div>
					</div>
					<!-- 右側：7/12（中に row ×3） -->
					<div class="col-md-7">
					<!-- row 1 -->
						<div class="row mb-3">
							<div class="col">
								<div class="card p-3">
									右側 row1
								</div>
							</div>
						</div>
					<!-- row 2 -->
						<div class="row mb-3">
							<div class="col">
								<div class="card p-3">
									右側 row2
								</div>
							</div>
						</div>
					<!-- row 3 -->
						<div class="row">
							<div class="col">
								<div class="card p-3">
									右側 row3
								</div>
							</div>
						</div>
					</div>
					<div class="row alert alert-light">
						スケジュール用
					</div>
				</div>	
				

				
		<!-- 目標未設定 -->
				<div th:unless="${hasGoal}">
					<div class="d-flex justify-content-center my-4">
						<a th:href="@{/goals/setting}" class="btn btn-primary mt-2">目標設定</a>
					</div>											
				</div>
				
				
				
				
				
				</div>
			</div>
		</main>
		<div th:replace="~{fragment :: footer}"></div>
	</div>
	<div th:replace="~{fragment :: scripts}"></div>

</body>
</html>